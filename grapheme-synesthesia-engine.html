<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AVIK Chromatic Morphology :: Grapheme Synesthesia</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            font-family: 'Courier New', monospace;
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        #container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        #header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            border: 2px solid rgba(0, 255, 255, 0.3);
        }
        
        .avik-title {
            font-size: 48px;
            letter-spacing: 12px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .letter-a { color: #FF1493; text-shadow: 0 0 20px #FF1493; }
        .letter-v { color: #FFFF00; text-shadow: 0 0 20px #FFFF00; }
        .letter-i { color: #00FFFF; text-shadow: 0 0 20px #00FFFF; }
        .letter-k { color: #9370DB; text-shadow: 0 0 20px #9370DB; }
        
        .subtitle {
            font-size: 14px;
            color: #00FF00;
            letter-spacing: 3px;
            text-shadow: 0 0 10px #00FF00;
            margin-bottom: 15px;
        }
        
        .thesis {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
        }
        
        #main-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .panel {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(0, 255, 255, 0.3);
            border-radius: 10px;
            padding: 20px;
        }
        
        .panel-title {
            font-size: 16px;
            color: #00FFFF;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        #input-area {
            width: 100%;
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid rgba(0, 255, 255, 0.5);
            border-radius: 5px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 24px;
            color: #fff;
            resize: vertical;
            min-height: 100px;
        }
        
        #output {
            font-size: 36px;
            line-height: 1.8;
            min-height: 150px;
            word-wrap: break-word;
        }
        
        #morpheme-analysis {
            font-size: 14px;
            line-height: 2;
        }
        
        .morpheme-group {
            margin: 10px 0;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
        }
        
        .morpheme-label {
            font-size: 11px;
            opacity: 0.7;
            margin-bottom: 5px;
        }
        
        #color-legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }
        
        .color-group {
            background: rgba(255, 255, 255, 0.05);
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
        }
        
        .color-swatch {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 3px;
            margin-right: 8px;
            vertical-align: middle;
            box-shadow: 0 0 10px currentColor;
        }
        
        #morpheme-library {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 8px;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 10px;
        }
        
        .morpheme-chip {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px;
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid transparent;
            font-size: 14px;
        }
        
        .morpheme-chip:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }
        
        #visualization {
            width: 100%;
            height: 300px;
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 5px;
        }
        
        #controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        button {
            background: linear-gradient(135deg, rgba(255,20,147,0.3), rgba(147,112,219,0.3));
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            transition: all 0.3s;
        }
        
        button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 20, 147, 0.6);
        }
        
        .pattern-display {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
            margin-top: 10px;
        }
        
        .pattern-block {
            width: 40px;
            height: 40px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 0 15px currentColor;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .pattern-block:hover {
            transform: scale(1.2);
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="header">
            <div class="avik-title">
                <span class="letter-a">A</span><span class="letter-v">V</span><span class="letter-i">I</span><span class="letter-k">K</span>
            </div>
            <div class="subtitle">CHROMATIC MORPHOLOGY :: GRAPHEME-COLOR SYNESTHESIA ENGINE</div>
            <div class="thesis">
                SYNTHETIC SYNESTHESIA THESIS :: SIGNS SYMMETRY SENSE<br>
                LINGUISTIC EVOLUTION :: CHROMATIC REVOLUTION<br>
                IDEOLOGICALLY IRRATIONAL NATURAL NETWORK PHENOMENON
            </div>
        </div>
        
        <div id="main-area">
            <div class="panel">
                <div class="panel-title">Input :: Word Formation</div>
                <textarea id="input-area" placeholder="Type words to see their chromatic structure...">synthetic synesthesia</textarea>
                <div id="controls">
                    <button id="analyzeBtn">ANALYZE</button>
                    <button id="clearBtn">CLEAR</button>
                    <button id="randomBtn">RANDOM MORPHEMES</button>
                    <button id="thesisBtn">LOAD THESIS</button>
                </div>
            </div>
            
            <div class="panel">
                <div class="panel-title">Output :: Chromatic Rendering</div>
                <div id="output"></div>
                <div class="panel-title" style="margin-top: 20px;">Color Pattern</div>
                <div class="pattern-display" id="colorPattern"></div>
            </div>
        </div>
        
        <div id="main-area">
            <div class="panel">
                <div class="panel-title">Morpheme Analysis</div>
                <div id="morpheme-analysis"></div>
            </div>
            
            <div class="panel">
                <div class="panel-title">Visual Field</div>
                <canvas id="visualization"></canvas>
            </div>
        </div>
        
        <div class="panel">
            <div class="panel-title">Morpheme Library :: Click to Add</div>
            <div id="morpheme-library"></div>
        </div>
        
        <div class="panel">
            <div class="panel-title">Color Legend :: Synesthetic Mapping</div>
            <div id="color-legend"></div>
        </div>
    </div>
    
    <script>
        // Synesthetic color mapping
        const colorMap = {
            'p': '#FF1493', 'q': '#9370DB', '9': '#DA70D6',
            'a': '#FF4444', 'm': '#FF1493', '6': '#FF6B9D',
            'd': '#FF8C00', 'r': '#D2691E', '3': '#CD853F',
            'b': '#FFD700', 's': '#FFFF00', 'y': '#F0E68C', 'n': '#EEE8AA', '4': '#FFD700', '8': '#DAA520',
            'c': '#00FF00', 'e': '#32CD32', 'f': '#90EE90', 'g': '#98FB98', 't': '#7FFF00', '7': '#00FA9A',
            'i': '#00FFFF', 'j': '#1E90FF', 'o': '#4169E1', '2': '#87CEEB',
            '5': '#708090',
            'x': '#9370DB', 'k': '#DA70D6', 'w': '#DDA0DD',
            'l': '#D3D3D3', 'z': '#A9A9A9', '0': '#808080', '1': '#BEBEBE',
        };
        
        // Color groups for legend
        const colorGroups = {
            'Pink/Purple': {color: '#FF1493', letters: 'p, q, 9'},
            'Red/Pink': {color: '#FF4444', letters: 'a, m, 6'},
            'Orange/Brown': {color: '#FF8C00', letters: 'd, r, 3'},
            'Yellow': {color: '#FFD700', letters: 'b, s, y, n, 4, 8'},
            'Green': {color: '#00FF00', letters: 'c, e, f, g, t, 7'},
            'Blue/Cyan': {color: '#00FFFF', letters: 'i, j, o, 2'},
            'Navy/Grey': {color: '#708090', letters: '5'},
            'Violet/Lavender': {color: '#9370DB', letters: 'x, k, w'},
            'Black/White/Grey': {color: '#D3D3D3', letters: 'l, z, 0, 1'}
        };
        
        // Common morphemes (roots, prefixes, suffixes)
        const morphemeLibrary = {
            prefixes: [
                'syn', 'anti', 'pre', 'post', 'hyper', 'meta', 'trans', 'proto',
                'neo', 'pseudo', 'auto', 'bio', 'geo', 'micro', 'macro', 'multi',
                'poly', 'mono', 'di', 'tri', 'quad', 'super', 'ultra', 'mega'
            ],
            roots: [
                'thesis', 'graph', 'morph', 'phone', 'chrom', 'gnos', 'log',
                'path', 'psych', 'soma', 'neuro', 'cardio', 'derm', 'gastro',
                'photo', 'therm', 'hydro', 'aero', 'cosm', 'anthro', 'demo'
            ],
            suffixes: [
                'ology', 'ism', 'ist', 'tion', 'sion', 'ness', 'ment', 'ity',
                'ous', 'ive', 'al', 'ic', 'able', 'ible', 'ize', 'ify', 'ate',
                'esis', 'osis', 'itis', 'oid', 'form', 'phobia', 'phile'
            ]
        };
        
        // Canvas setup
        const canvas = document.getElementById('visualization');
        const ctx = canvas.getContext('2d');
        canvas.width = canvas.offsetWidth;
        canvas.height = 300;
        
        let particles = [];
        
        class Particle {
            constructor(letter, x, y, color) {
                this.letter = letter;
                this.x = x;
                this.y = y;
                this.color = color;
                this.vx = (Math.random() - 0.5) * 2;
                this.vy = (Math.random() - 0.5) * 2;
                this.radius = 15;
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                
                if (this.x < this.radius || this.x > canvas.width - this.radius) {
                    this.vx *= -0.8;
                    this.x = Math.max(this.radius, Math.min(canvas.width - this.radius, this.x));
                }
                if (this.y < this.radius || this.y > canvas.height - this.radius) {
                    this.vy *= -0.8;
                    this.y = Math.max(this.radius, Math.min(canvas.height - this.radius, this.y));
                }
                
                this.vx *= 0.99;
                this.vy *= 0.99;
            }
            
            draw() {
                ctx.fillStyle = this.color;
                ctx.shadowColor = this.color;
                ctx.shadowBlur = 15;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fill();
                ctx.shadowBlur = 0;
                
                ctx.fillStyle = '#000';
                ctx.font = 'bold 16px Courier New';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(this.letter.toUpperCase(), this.x, this.y);
            }
        }
        
        function colorizeText(text) {
            return text.split('').map(char => {
                const lower = char.toLowerCase();
                const color = colorMap[lower] || '#FFFFFF';
                return `<span style="color: ${color}; text-shadow: 0 0 10px ${color};">${char}</span>`;
            }).join('');
        }
        
        function analyzeText() {
            const input = document.getElementById('input-area').value;
            const output = document.getElementById('output');
            const colorPattern = document.getElementById('colorPattern');
            
            // Colorize output
            output.innerHTML = colorizeText(input);
            
            // Create color pattern blocks
            colorPattern.innerHTML = '';
            const words = input.toLowerCase().split(/\s+/);
            words.forEach(word => {
                word.split('').forEach(char => {
                    const color = colorMap[char] || '#FFFFFF';
                    const block = document.createElement('div');
                    block.className = 'pattern-block';
                    block.style.backgroundColor = color;
                    block.style.color = color;
                    block.textContent = char;
                    block.title = char;
                    colorPattern.appendChild(block);
                });
            });
            
            // Morpheme analysis
            analyzeMorphemes(input);
            
            // Update visualization
            updateVisualization(input);
        }
        
        function analyzeMorphemes(text) {
            const analysis = document.getElementById('morpheme-analysis');
            const words = text.toLowerCase().split(/\s+/);
            
            let html = '';
            
            words.forEach(word => {
                let found = {prefix: null, root: null, suffix: null};
                
                // Find prefix
                for (const prefix of morphemeLibrary.prefixes) {
                    if (word.startsWith(prefix)) {
                        found.prefix = prefix;
                        break;
                    }
                }
                
                // Find suffix
                for (const suffix of morphemeLibrary.suffixes) {
                    if (word.endsWith(suffix)) {
                        found.suffix = suffix;
                        break;
                    }
                }
                
                // Find root
                for (const root of morphemeLibrary.roots) {
                    if (word.includes(root)) {
                        found.root = root;
                        break;
                    }
                }
                
                if (found.prefix || found.root || found.suffix) {
                    html += `<div class="morpheme-group">`;
                    html += `<div class="morpheme-label">WORD: ${word}</div>`;
                    
                    if (found.prefix) {
                        html += `<div>PREFIX: ${colorizeText(found.prefix)}</div>`;
                    }
                    if (found.root) {
                        html += `<div>ROOT: ${colorizeText(found.root)}</div>`;
                    }
                    if (found.suffix) {
                        html += `<div>SUFFIX: ${colorizeText(found.suffix)}</div>`;
                    }
                    
                    html += `</div>`;
                }
            });
            
            analysis.innerHTML = html || '<div style="opacity: 0.5;">No recognized morphemes</div>';
        }
        
        function updateVisualization(text) {
            particles = [];
            const chars = text.toLowerCase().replace(/\s/g, '').split('');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 100;
            
            chars.forEach((char, i) => {
                const angle = (i / chars.length) * Math.PI * 2;
                const x = centerX + Math.cos(angle) * radius;
                const y = centerY + Math.sin(angle) * radius;
                const color = colorMap[char] || '#FFFFFF';
                particles.push(new Particle(char, x, y, color));
            });
        }
        
        function animate() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            particles.forEach(p => {
                p.update();
                p.draw();
            });
            
            // Draw connections between similar colors
            for (let i = 0; i < particles.length; i++) {
                for (let j = i + 1; j < particles.length; j++) {
                    if (particles[i].color === particles[j].color) {
                        const dx = particles[i].x - particles[j].x;
                        const dy = particles[i].y - particles[j].y;
                        const dist = Math.sqrt(dx * dx + dy * dy);
                        
                        if (dist < 150) {
                            ctx.strokeStyle = particles[i].color + '33';
                            ctx.lineWidth = 2;
                            ctx.beginPath();
                            ctx.moveTo(particles[i].x, particles[i].y);
                            ctx.lineTo(particles[j].x, particles[j].y);
                            ctx.stroke();
                        }
                    }
                }
            }
            
            requestAnimationFrame(animate);
        }
        
        function populateMorphemeLibrary() {
            const library = document.getElementById('morpheme-library');
            
            Object.entries(morphemeLibrary).forEach(([type, morphemes]) => {
                morphemes.forEach(morpheme => {
                    const chip = document.createElement('div');
                    chip.className = 'morpheme-chip';
                    chip.innerHTML = colorizeText(morpheme);
                    chip.onclick = () => {
                        const input = document.getElementById('input-area');
                        input.value += (input.value ? ' ' : '') + morpheme;
                        analyzeText();
                    };
                    library.appendChild(chip);
                });
            });
        }
        
        function populateColorLegend() {
            const legend = document.getElementById('color-legend');
            
            Object.entries(colorGroups).forEach(([name, data]) => {
                const group = document.createElement('div');
                group.className = 'color-group';
                group.innerHTML = `
                    <div>
                        <span class="color-swatch" style="background-color: ${data.color};"></span>
                        <strong>${name}</strong>
                    </div>
                    <div style="margin-top: 5px; opacity: 0.7;">${data.letters}</div>
                `;
                legend.appendChild(group);
            });
        }
        
        // Event listeners
        document.getElementById('analyzeBtn').addEventListener('click', analyzeText);
        
        document.getElementById('clearBtn').addEventListener('click', () => {
            document.getElementById('input-area').value = '';
            document.getElementById('output').innerHTML = '';
            document.getElementById('colorPattern').innerHTML = '';
            document.getElementById('morpheme-analysis').innerHTML = '';
            particles = [];
        });
        
        document.getElementById('randomBtn').addEventListener('click', () => {
            const allMorphemes = [
                ...morphemeLibrary.prefixes,
                ...morphemeLibrary.roots,
                ...morphemeLibrary.suffixes
            ];
            const random = [];
            for (let i = 0; i < 5; i++) {
                random.push(allMorphemes[Math.floor(Math.random() * allMorphemes.length)]);
            }
            document.getElementById('input-area').value = random.join(' ');
            analyzeText();
        });
        
        document.getElementById('thesisBtn').addEventListener('click', () => {
            document.getElementById('input-area').value = 
                'synthetic synesthesia thesis signs symmetry sense linguistic evolution chromatic revolution ideologically irrational natural network phenomenon hyperactiv';
            analyzeText();
        });
        
        document.getElementById('input-area').addEventListener('input', analyzeText);
        
        // Initialize
        populateMorphemeLibrary();
        populateColorLegend();
        analyzeText();
        animate();
    </script>
</body>
</html>